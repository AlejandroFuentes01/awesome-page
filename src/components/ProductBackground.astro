---
export interface Props {
    videoSrc: string;
    pageClass: string;
}

const { videoSrc, pageClass } = Astro.props;
---

<section class="bg-section">
    <div class="bg-grid">
        <div class="bg-cell cell-1"></div>
        <div class="bg-cell cell-2"></div>
        <div class="bg-cell cell-3"></div>
        <div class="bg-cell cell-4"></div>
        <div class="bg-cell cell-5"></div>
        <div class="bg-cell cell-6"></div>
        <div class="bg-cell cell-7"></div>
    </div>

    <div class={`mobile-video-background ${pageClass}-video`}>
        <video autoplay muted loop playsinline>
            <source src={videoSrc} type="video/mp4" />
        </video>
    </div>

    <slot />
</section>

<style>
    .bg-section {
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        min-height: 100vh;
        width: 100%;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        color: white;
        font-family: "Alte Haas Grotesk", sans-serif;
        overflow-y: auto;
    }

    .mobile-video-background {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        z-index: -1;
    }

    .mobile-video-background video {
        width: 100%;
        height: 100%;
        object-fit: cover;
    }

    .bg-grid {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        z-index: -1;
        display: grid;
        grid-template-columns: repeat(3, 1fr);
        grid-template-rows: repeat(2, 1fr);
    }

    .bg-cell {
        background-image: url("/background/fondo_gif.gif");
        background-size: cover;
        background-repeat: no-repeat;
        background-position: center;
    }

    .cell-1 { opacity: 0.98; }
    .cell-2 { opacity: 0.96; }
    .cell-3 { opacity: 0.97; }
    .cell-4 { opacity: 0.95; }
    .cell-5 { opacity: 0.99; }
    .cell-6 { opacity: 0.96; }

    @media (max-width: 1199px) {
        .bg-grid {
            display: block;
        }

        .bg-cell {
            display: none;
        }

        .cell-1 {
            display: block;
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            opacity: 1;
            background-size: cover;
        }
    }

    @media (max-width: 1199px) and (orientation: landscape) {
        .bg-section {
            min-height: 100vh;
        }

        .cell-1 {
            height: 100vh;
            min-height: 100%;
            position: fixed;
            background-size: cover;
        }
    }

    @media (min-width: 1200px) {
        .bg-grid {
            padding: 0;
            gap: 0;
            box-shadow: inset 0 0 100px rgba(0, 0, 0, 0.3);
        }

        .bg-cell {
            position: relative;
        }

        .bg-cell::after {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: radial-gradient(
                circle at center,
                transparent 70%,
                rgba(0, 0, 0, 0.05) 100%
            );
            z-index: 1;
        }
    }

    @media (min-width: 1800px) {
        .bg-grid {
            box-shadow: inset 0 0 150px rgba(0, 0, 0, 0.35);
        }

        .bg-cell::after {
            background: radial-gradient(
                circle at center,
                transparent 60%,
                rgba(0, 0, 0, 0.07) 100%
            );
        }
    }

    @media (max-width: 767px) {
        .mobile-video-background {
            display: block;
        }

        .bg-grid {
            display: none;
        }
    }
</style>
